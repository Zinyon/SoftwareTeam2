<% layout('../layout/layout')%>

<h2>이수과목 추가 입력</h2>
  <div class = "container2" align = "center">
    <div>
      <input id="subjects" type="text" />
      <button id="click">추가하기</button>
    </div>
    <div id="selected-subjects">
    수강 과목 리스트
    </div>
    <a href="/" id="subject-array" class="button">완료</a>
  </div>

<script>

  $(document).ready(function(){
    var subjects='<%=subjects%>';
    var subjects = subjects.split(',');
    $("#subjects").autocomplete({
      source: subjects,
      select: function(event, ui){
        console.log(ui.item);
      },
      focus: function(event, ui){
        return ui.item;
      }
    })
  });

  var selected=[];
  var path = $(location).attr('pathname')+'/';

  $("#click").on("click", function () {
    var newSelected = $("#subjects").val();
    var thehtml = '<br/>' + $("#subjects").val();
    var selectedItems = $('#selected-subjects').html();
    if(selectedItems.indexOf(newSelected) === -1){
      $('#selected-subjects').append(thehtml);
      path=path+newSelected+',';
      $('a#subject-array').attr('href',path);  
    }else{
      alert("Already selected!");
    }
    $("#auto").val('');
  });





</script>